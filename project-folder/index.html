<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Night Countdown</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Segoe UI', sans-serif;
        color: white;
        text-align: center;
        overflow: hidden;
    }

    .container {
        background: rgba(0, 0, 0, 0.3);
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 0 30px rgba(0,0,0,0.5);
        animation: fadeIn 1s ease-in-out;
        position: relative;
        z-index: 1;
    }

    h1 {
        font-size: 3rem;
        margin-bottom: 20px;
        text-shadow: 2px 2px 10px black;
    }

    .timer {
        font-size: 5rem;
        font-weight: bold;
        letter-spacing: 5px;
        text-shadow: 2px 2px 15px #ffed4a;
        animation: glow 1.5s infinite;
    }

    button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1.2rem;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        background: #ffed4a;
        color: #333;
        font-weight: bold;
    }

    @keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
    }

    @keyframes glow {
        0%, 100% {
            text-shadow: 0 0 20px #ffed4a, 0 0 30px #ffed4a, 0 0 40px #ffed4a;
        }
        50% {
            text-shadow: 0 0 10px #ffed4a, 0 0 20px #ffed4a, 0 0 30px #ffed4a;
        }
    }
</style>
</head>
<body>

<canvas id="confetti-canvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;"></canvas>
<div class="container">
    <h1>ðŸŽ® Game Night Starts In ðŸŽ®</h1>
    <div class="timer" id="countdown">01:00:00</div>
    <button id="startBtn">Start Countdown</button>
</div>

<!-- Main audio -->
<audio id="countdownAudio" src="audio.mp3" preload="auto"></audio>

<!-- Confetti library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
    let timeInSeconds = 3600; // 1 hour
    const countdownEl = document.getElementById("countdown");
    const audio = document.getElementById("countdownAudio");
    const startBtn = document.getElementById("startBtn");
    const audioTriggers = {
        3527: 0,
        3001: 5,
        2401: 10,
        1801: 15,
        1201: 20,
        601: 25,
        301: 30,
        61: 35,
        51: 40,
        41: 45,
        31: 50,
        21: 55,
        11: 60,
        10: 65,
        9: 70,
        8: 75,
        7: 80,
        6: 85,
        5: 90,
        4: 95,
        3: 100,
        2: 105,
        1: 110
    };

    let triggeredTimes = new Set();
    let countdownInterval;

    function launchConfetti() {
        const duration = 5 * 1000;
        const end = Date.now() + duration;

        (function frame() {
            confetti({
                particleCount: 5,
                angle: 60,
                spread: 55,
                origin: { x: 0 }
            });
            confetti({
                particleCount: 5,
                angle: 120,
                spread: 55,
                origin: { x: 1 }
            });
            if (Date.now() < end) {
                requestAnimationFrame(frame);
            }
        })();
    }

    function updateTimer() {
        let hours = Math.floor(timeInSeconds / 3600);
        let minutes = Math.floor((timeInSeconds % 3600) / 60);
        let seconds = timeInSeconds % 60;

        countdownEl.textContent =
            String(hours).padStart(2, '0') + ":" +
            String(minutes).padStart(2, '0') + ":" +
            String(seconds).padStart(2, '0');

        if (audioTriggers[timeInSeconds] && !triggeredTimes.has(timeInSeconds)) {
            audio.currentTime = audioTriggers[timeInSeconds];
            audio.play().catch(e => console.log("Audio play prevented:", e));
            triggeredTimes.add(timeInSeconds);
        }

        if (timeInSeconds > 0) {
            timeInSeconds--;
        } else if (countdownEl.textContent !== "ðŸŽ‰ Let's Go! ðŸŽ‰") {
            countdownEl.textContent = "ðŸŽ‰ Let's Go! ðŸŽ‰";
            launchConfetti();
            clearInterval(countdownInterval);
        }
    }

    startBtn.addEventListener("click", () => {
        audio.play().catch(e => console.log("Audio play prevented:", e));
        startBtn.style.display = "none";
        updateTimer();
        countdownInterval = setInterval(updateTimer, 1000);
    });
</script>

</body>
</html>
